<!doctype html>
<html lang="en">
<head>
   
    <head>
        <meta charset="utf-8">
        <meta content="width=device-width, initial-scale=1.0" name="viewport">
      
        <title><%= pageTitle %></title>
        <meta content="" name="description">
        <meta content="" name="keywords">
      
        <!-- Favicons -->
        <link href="images/favicon.png" rel="icon">
        <link href="assets/img/apple-touch-icon.png" rel="apple-touch-icon">
      
        <!-- Google Fonts -->
        <link href="https://fonts.googleapis.com/css?family=Open+Sans:300,300i,400,400i,600,600i,700,700i|Raleway:300,300i,400,400i,600,600i,700,700i" rel="stylesheet">
      
        <!-- Vendor CSS Files -->
        <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-EVSTQN3/azprG1Anm3QDgpJLIm9Nao0Yz1ztcQTwFspd3yD65VohhpuuCOmLASjC" crossorigin="anonymous">
        <link href="/vendor/aos/aos.css" rel="stylesheet">
        <link href="vendor/bootstrap-icons/bootstrap-icons.css" rel="stylesheet">
        <link href="vendor/boxicons/css/boxicons.min.css" rel="stylesheet">
        <link href="vendor/glightbox/css/glightbox.min.css" rel="stylesheet">
        <link href="vendor/swiper/swiper-bundle.min.css" rel="stylesheet">
      
        <!-- Template Main CSS File -->
        <link href="css/style.css" rel="stylesheet">


    <style>

.form-control:focus {
    box-shadow: none;
    border-color: red
}

.profile-button {
    background: black;
    box-shadow: none;
    border: none
}

.profile-button:hover {
    background: #8c1806
}

.profile-button:focus {
    background: green;
    box-shadow: none
}

.profile-button:active {
    background: black;
    box-shadow: none
}

.back:hover {
    color: #8c1806;
    cursor: pointer
}

.labels {
    font-size: 16px
}

.add-experience:hover {
    background: black;
    color: #fff;
    cursor: pointer;
    border: solid 1px #8c1806
}
    </style>
</head>

<body>
   
    <header id="header" class="fixed-top d-flex align-items-center">
        <div class="container d-flex align-items-center justify-content-between">
          <div class="logo">
            <h1 class="text-light"><a href="/"><img src="images/favicon.png" width="60px" height="120px"><span><b><big style="color: rgb(224, 53, 53);">RED</big>FLOW</span></b></a></h1>
          </div>
          <nav id="navbar" class="navbar">
            <ul>
              <li><a class="nav-link scrollto" href="/rHome">Home</a></li>
              <li><a class="getstarted scrollto" href="/selectUser">Log Out</a></li>
            </ul>
            <i class="bi bi-list mobile-nav-toggle"></i>
          </nav>
        </div>
      </header>
    
                <div class="container rounded bg-white mt-5 mb-5 border-4">
                    <div class="row">
                        <div class="col-md-3 border-right">
                            <div class="d-flex flex-column align-items-center text-center p-3 py-5">
                                <img class="rounded-circle mt-5" width="150px" 
                                src="https://st3.depositphotos.com/15648834/17930/v/600/depositphotos_179308454-stock-illustration-unknown-person-silhouette-glasses-profile.jpg">
                                <span class="font-weight-bold" id="userType"></span><span class="text-black-50" id="userName"></span>
                                <!-- <span> </span> -->
                            </div>
                        </div>
                        <div class="col-md-5 border-right">
                            <div class="p-3 py-5">
                                <div class="d-flex justify-content-between align-items-center mb-3">
                                    <h4 class="text-right">Profile Settings</h4>
                                </div>
                                <form id="contact-form" action="#" method="post" data-toggle="validator">
                                <div class="row">
                                <div class="col-md-12" class="name"><label class="labels">Name
                                    </label><input type="text" class="form-control" id="inputName" placeholder="name" value="">
                                </div>
                                <!-- <div class="col-md-6" class="usertype"><label class="labels">User_type
                                </label><input type="text" class="form-control" id="inputType" value="" placeholder="User_type">
                                </div> -->
                                <!-- <div class="col-md-6" class="bloodtype"><label class="labels">Donation_type
                                </label><input type="text" class="form-control" id="bloodType" value="" placeholder="donation_type">
                                </div> -->
                                </div>
                                </div>
                                <div class="row mt-2">
                                    <div class="col-md-12"><label class="labels">phone Number</label>
                                        <input type="text" class="form-control" id="phone_number" placeholder="enter phone number" value="">
                                    </div>
                                    <div class="col-md-12"><label class="labels">City</label>
                                        <input type="text" class="form-control" id="city" placeholder="enter city" value="">
                                    </div>
                                    <div class="col-md-12"><label class="labels">Address</label>
                                        <input type="text" class="form-control" id="address" placeholder="enter address" value="">
                                    </div>
                                    <!-- <div class="col-md-12"><label class="labels">Gender</label>
                                        <input type="text" class="form-control" id="gender" placeholder="enter your gender" value="">
                                    </div> -->
                                </div>
                                <div class="row mt-3">
                                    <!-- <div class="col-md-6"><label class="labels">Date of Birth</label>
                                        <input type="text" class="form-control" id="dateofbirth" placeholder="enter date of birth" value="">
                                    </div> -->
                                    <!-- <div class="col-md-6"><label class="labels">Zip Code</label>
                                        <input type="text" class="form-control" id="zipcode" placeholder="enter your zip code" value="">
                                    </div> -->
                                    <div class="col-md-12"><label class="labels">Email</label>
                                        <input type="text" class="form-control" id="email" placeholder="enter your email" value="">
                                    </div>
                                    <div class="col-md-12"><label class="labels">Message</label>
                                        <input type="text" class="form-control" id="message" placeholder="write something" value="">
                                    </div>
                                </div>
                                <div class="mt-5 text-center">
                                    <button class="btn btn-primary profile-button" type="button" id="cancle">Cancle</button>
                                    <button class="btn btn-primary profile-button" type="button" id="update-user">Update</button>                                   
                                </div>
                            </form>
                            </div>
                        </div>
                    </div>
                </div>
                <!-- </div>
                </div>
    
    
    
    <!-- <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.6.0/jquery.min.js"></script> -->
   
    
    <script src="/vendor/aos/aos.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/js/bootstrap.bundle.min.js" integrity="sha384-MrcW6ZMFYlzcLA8Nl+NtUVF0sA7MsXsP1UyJoMp4YLEuNSfAP+JcXn/tWtIaxVXM" crossorigin="anonymous"></script>
    <script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.9.2/dist/umd/popper.min.js" integrity="sha384-IQsoLXl5PILFhosVNubq5LC7Qb9DXgDA9i+tQ8Zj3iwWAwPtgFTxbJ8NT4GN1R8p" crossorigin="anonymous"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.2.1/jquery.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/js/bootstrap.min.js" integrity="sha384-cVKIPhGWiC2Al4u+LWgxfKTRIcfu0JTxR+EQDz/bgldoEyl4H0zUF0QKbrJ0EcQF" crossorigin="anonymous"></script>
    <script src="/vendor/glightbox/js/glightbox.min.js"></script>
    <!-- <script src="/vendor/isotope-layout/isotope.pkgd.min.js"></script> -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery.isotope/3.0.6/isotope.pkgd.js" integrity="sha512-E/yP5UiPXb6VelX+dFLuUD+1IZw/Kz7tMncFTYbtoNSCdRZPFoGN3jZ2p27VUxHEkhbPiLuZhZpVEXxk9wAHCQ==" crossorigin="anonymous" referrerpolicy="no-referrer"></script>
    <script src="/vendor/swiper/swiper-bundle.min.js"></script>
    <!-- <script src="/vendor/php-email-form/validate.js"></script> -->
    <script src="/js/main.js"></script>
    <script>
        var user = JSON.parse('<%-JSON.stringify(user)%>');
      </script>
    <script
      src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.9.2/dist/umd/popper.min.js"
      integrity="sha384-IQsoLXl5PILFhosVNubq5LC7Qb9DXgDA9i+tQ8Zj3iwWAwPtgFTxbJ8NT4GN1R8p"
      crossorigin="anonymous"
    ></script>
    <script
      src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/js/bootstrap.min.js"
      integrity="sha384-cVKIPhGWiC2Al4u+LWgxfKTRIcfu0JTxR+EQDz/bgldoEyl4H0zUF0QKbrJ0EcQF"
      crossorigin="anonymous"
    ></script>
    <script src="/javascripts/ajaxRequest.js"></script>
    <script>
        $(document).ready(function () {
            let userId = user.id;
            
            get();

            async function get() {
                const response = await getData('GET', `/api/user/${userId}`);
                if(response.statusCode === 200) {
                    const user = response.data;
                    const usertype = user.usertype;
                    const username = user.name;

                    let inputName = user.name;
                    let phone_number = user.phonenumber;
                    let city = user.city;
                    let address = user.address;
                    let email = user.email;
                    let message = user.message;


                    $("#inputName").val(inputName);
                    $("#phone_number").val(phone_number);
                    $("#city").val(city);
                    $("#address").val(address);
                    $("#email").val(email);
                    $("#message").val(message);

                    $("#userType").text(usertype);
                    $("#userName").text(username);
                }
            }           
            // update user click
            $('#update-user').click(async function(e) {
                e.preventDefault();
                const name = $("#inputName").val();
                const phonenumber = $("#phone_number").val();
                const city = $("#city").val();
                const address = $("#address").val();
                const email = $("#email").val();
                const message = $("#message").val();
                const payload = {
                    name, phonenumber, city, address, email, message
                };
                const response = await getData('PUT', `/api/user/${userId}`, payload);
                console.log(response)
                if(response.statusCode === 200) {
                    if (window.confirm(response.message)) {
                        location.reload();
                    }
                }
            })
        });
    </script>

  </body>
</html>